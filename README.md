# BaDM RESTapi
# Имеющиеся метода 

#/api/lonin
Принимает только метод POST
Метод для авторизации. Возвращает токен который нужно будет передавать в заголовке Authorization
```json
{
    "email": "...",
    "password": "..."
}
```
ответ
```json
{
    "code": 200,
    "token": "..."
}
```

#/api/user
Принимает методы GET/POST/PUT
Метода доступны только авторизованым пльзователям с правами administrator

Запрос GET /api/user/{id} - id пользователя
Для вывода информации о пользователе
ответ
```json
{
    "code": 200,
    "user": {
        "name": "..",
        "email": "..",
        "roles": "..",
        "created_at": "0000-00-00 00:00:00",
        "phone": "...",
        "access": "1"
    }
}
```
если пользователь не найден
```json
{
    "code": 400,
    "date": "User is not found"
}
```

Запрос POST /api/user
Для создания нового пользователя
доступно 2 роли administrator/user
```json
{
	"name": "..",
  "email": "..",
  "password": "..",
  "password_two": "..",
  "phone": "..",
  "roles": ".."
}
```
если все в поряжке будет ответ
```json
{
    "code": 200,
    "user_id": ".."
}
```
в случае ошибок будет ответ 
```json
{
    "code": 400,
    "дополнительная информация"
}
```
Запрос  PUT /api/user{id} - id пользователя
Для изминения пользовательских данных
Доступ (access) возможет только 1-открыт 0-закрыт
```json
{
	"name": "..",
  "email": "..",
  "phone": "..",
  "roles": "..",
  "access": ".."
}
```
если данные обновлены 
```json
{
    "code": 200,
    "date": "user update successfully"
}
```
В случае какой либо ошибки ответ будет
```json
{
    "code": 400,
    "дополнительная информация"
}
```

#/api/fibonacci

Принимает методы GET
Метод доступен всем авторизованым пльзователям
Метод для получения числа Фибоначчи

Запрос GET /api/fibonacci/{number} - number последовательный номер числа Фибоначчи
Ответ
```json
{
    "result": ..
}
```

#/api/get_price/

Принимает методы GET
Метод доступен всем авторизованым пльзователям
Метод для преобразования суммы в текст

Запрос GET /api/get_price/{float} - число с плавающей точной

```json
{
    "result": "одна тысяча двести тридцать четыре грн 99 коп"
}
```

#/api/tasks

Принимает методы GET
Метод доступен всем авторизованым пльзователям
Метод для для получения всех задач

Запрос GET /api/tasks
Ответ
```json
{
    "code": 200,
    "tasks": [
        {
            "id": "..",
            "title": "..",
            "description": "..",
            "status": "..",
            "created_at": "0000-00-00 00:00:00",
            "author": ".."
        },
        "..."
 }
```

#/api/task

Принимает только метод GET/POST
Метод доступен всем авторизированым пользователям

Запрос GET /api/task/{id} - id задачи
Метод возвращает одну задачу со всеми комментариями

```json
{
    "code": 200,
    "task": {
        "id": "..",
        "title": "..",
        "description": "..",
        "status": "..",
        "created_at": "0000-00-00 00:00:00",
        "author": "..",
        "comments": [
            {
                "id": "..",
                "task_id": "..",
                "description": "..",
                "status": "..",
                "created_at": "0000-00-00 00:00:00",
                "author": ".."
            },
            "..."
        ]
    }
}
```

Запрос POST /api/task
Метод для создания новой задачи 
Принимает запрос

```json
{
	"title":"..",
	"description":".."
}
```
ответ
{
    "code": 200,
    "task_id": "..."
}


#/api/addComment/
Принимает только метод POST
Метод доступен всем авторизированым пользователям
Метод для создания комментария к задаче
Задача закрывается только через комментарии. Для закрытия задачи нужно прислать status = done
Метод принимает только 2 статуса (pending\done)
Запрос POST /api/addComment/{id} - id задачи
Привет запроса
```json
{
	"status":"pending",
	"description":".."
}
```
Ответ
```json
{
    "code": 200,
    "comment_id": ".."
}
```
В случае каких либо ошибок будет ответ 
```json
{
    "code": 400,
    "с дополнительной информацией"
}
```

#Основные ошибки

Обращение к несуществующему роуту
```json
{
    "code": 404,
    "date": "invalid route"
}
```

Обращение к роуту необрабатываемым методом 
```json
{
    "code": 404,
    "date": "not valid patch or method"
}
```

Отказ в доступе
```json
{
    "code": 403,
    "date": "access denied"
}
```

Переданы не валидные параметры в URL
```json
{
    "code": 404,
    "date": "Parameters do not match pattern"
}
```
